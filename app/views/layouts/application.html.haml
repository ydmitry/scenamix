!!! 5
%html(lang="en")
  %head
    %meta(charset="utf-8")
    %meta(http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1")
    %meta(name="viewport" content="width=device-width, initial-scale=1.0")
    %title= content_for?(:title) ? yield(:title) : "Scenamix"
    = csrf_meta_tags
    / Le HTML5 shim, for IE6-8 support of HTML elements
    /[if lt IE 9]
      = javascript_include_tag "//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.1/html5shiv.js"
    = stylesheet_link_tag "application", :media => "all"
    %link(href="images/apple-touch-icon-144x144.png" rel="apple-touch-icon-precomposed" sizes="144x144")
    %link(href="images/apple-touch-icon-114x114.png" rel="apple-touch-icon-precomposed" sizes="114x114")
    %link(href="images/apple-touch-icon-72x72.png" rel="apple-touch-icon-precomposed" sizes="72x72")
    %link(href="images/apple-touch-icon.png" rel="apple-touch-icon-precomposed")
    %link(href="images/favicon.ico" rel="shortcut icon")


  %body
    .navbar.navbar-inverse.navbar-static-top
      .navbar-inner
        .container
          %a.btn.btn-navbar(data-target=".nav-collapse" data-toggle="collapse")
            %span.icon-bar
            %span.icon-bar
            %span.icon-bar
          
            %a.brand(href="/") Scenamix
          
            .container.nav-collapse
              %ul.nav
                %li= link_to "Scenes", scenes_path
              %ul.nav.pull-right
                - if user_signed_in?
                  %li= link_to 'Sign out', destroy_user_session_path, method: :delete
                - else
                  %li= link_to 'Sign in', sign_in_path
                  %li= link_to 'Sign up', new_user_registration_path

    .container#layout-content-container

      - if notice      
        %div.alert.alert-success
          = notice

      - if alert
        %div.alert
          = alert


      = yield
    
      %footer
        %p &copy; Scenamix 2013

    %script#response-alternative-item-template{:type => 'text/html'}
      <div class='well response'>
      <%= response %>
      <a href='/scenes/<%= scene_id %>/responses/<%= id %>' class='btn btn-mini'>Switch scenario</a>
      </div>

    %script#response-item-template{:type => 'text/html'}
      <div class='well alert-info response'>
      <%= response %>
      <a class="btn btn-mini response-alternative" href="/scenes/<%= scene_id %>/alternative_responses/<%= id %>">Alternative responses</a>
      <a class="icon-plus-sign response-weight" href="/scenes/<%= scene_id %>/responses/<%= id %>/upvote"></a>
      <a class="icon-minus-sign response-weight" href="/scenes/<%= scene_id %>/responses/<%= id %>/downvote"></a>
      (<span class="response-weight-value"><%= upvotes %>-<%= response.downvotes %></span>)
      </div>

    %script#responses-alternative-template{:type => 'text/html'}
      <div>
      <h4>Alternative responses</h4>
      
      <form action='' method='post' accept-charset="UTF-8">      
      <div class="control-group">
      <label for="alternative_response" class="control-label">Response</label>
      <div class="controls">
      <textarea placeholder="Do you have another image in your mind?" name="response[response]" id="alternative_response" class="input-xxlarge"></textarea>
      </div>
      </div>
      <div class="form-actions">
      <input type="submit" value="Post alternative response" name="commit" class="btn btn-primary">
      </div>
      </form>

      <div id="responses-alternative"></div>
      </div>


    %script#responses-template{:type => 'text/html'}
      <div>
      <div id="scenario-current-responses">
      </div>
      <hr>
      <form method="post" action="/scenes/<%= scene_id %>/responses" accept-charset="UTF-8" id="response-post-form">
      <input type="hidden" value="<%= parent_id %>" name="response[parent_id]" id="response_parent_id">
      <div class="control-group">
      <label for="response_response" class="control-label">Response</label>
      <div class="controls">
      <textarea placeholder="What do you imagine?" name="response[response]" id="response_response" class="input-xxlarge"></textarea>
      </div>
      </div>
      <div class="form-actions">
      <input type="submit" value="Post response to scene" name="commit" class="btn btn-primary">
      </div>
      </form>
      </div>

    /
      Javascripts
      \==================================================
    / Placed at the end of the document so the pages load faster
    = requirejs_include_tag "application"
